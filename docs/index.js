/*! For license information please see index.js.LICENSE.txt */
(()=>{"use strict";function t(){this.promoDialog.removeEventListener("click",this.onPromoDialogClick),this.promoDialog.remove()}function i(t){t.target.closest("[data-close]")?this.closePromoDialog():t.target.closest("[data-content]")||this.closePromoDialog()}function o(t){this.callbacks.error.forEach((i=>i(t)))}function e(){if(this.extensionExists)return;if(this.config.skipPromoDialog)return void this.throwError(new Error("extension is not installed"));this.promoDialog=document.createElement("div"),this.promoDialog.style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(63, 81, 181, 0.7); z-index: 1000; box-sizing: border-box;";this.promoDialog.innerHTML="<div style='display: table; width: 100%; height: 100%;'>\n    <div style='display: table-cell; width: 100%; height: 100%; text-align: center; vertical-align: middle;'>\n      <div style='text-align: left; background: white; display: inline-block; padding: 25px; width: 480px; border-radius: 4px; max-width: 80%; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;'>\n        <div>\n          <div style='float: right; cursor: pointer;' data-close='true'>\n            &times;\n          </div>\n          <div>\n            You have to install Oberton Chrome Extension\n          </div>\n        </div>\n        <div style='text-align: center; padding-top: 40px;' data-content='true'>\n          <a target='_blank' href='https://chrome.google.com/webstore/detail/oberton-chrome-freeton-ex/emdkjliaadghhnaanlbpdgmddbjlmhpi'>\n            <img alt='Available in Chrome Web Store' src='https://storage.googleapis.com/chrome-gcs-uploader.appspot.com/image/WlD8wC6g8khYWPJUsQceQkhXSlv1/mPGKYBIR2uCP0ApchDXE.png' alt='' />\n          </a>\n        </div>\n      </div>\n    </div>\n  </div>",this.promoDialog.addEventListener("click",this.onPromoDialogClick),document.body.appendChild(this.promoDialog)}function n(t={}){if(!this.active)throw new Error("failed to call sendTokens method on destroyed object");const i=new CustomEvent("@oberton/callObertonFunction",{detail:{fn:"sendTokens",apiId:this.sessionId,params:t}});window.dispatchEvent(i),setTimeout(this.displayPromoDialog,500)}function s(){this.active=!1,this.network=null,window.removeEventListener("@oberton/extensionResponse",this.onExtensionResponse)}function a(t){const i=t.detail;if(t.detail.appId!==this.sessionId)return;const{subject:o,value:e}=i;this.callbacks.response.forEach((t=>t({subject:o,detail:i}))),"extensionExists"===i.subject&&i.value?this.extensionExists=!0:"transactionSent"===i.subject?this.callbacks.transactionSent.forEach((t=>t(e))):"transactionFailed"===i.subject&&(this.callbacks.transactionFailed.forEach((t=>t(e))),this.callbacks.error.forEach((t=>t(e.error))))}function r(t,i){if(!this.callbacks[t])throw new Error(`Unknown event ${t}, supported events are [${Object.keys(this.callbacks).join(", ")}]`);return this.callbacks[t].push(i),this}const l=function(l="net.ton.dev",c={}){return this.network=l,this.active=!0,this.extensionExists=!1,this.config=c,this.sessionId=Math.random().toString(36).substring(2),this.callbacks={error:[],response:[],transactionSent:[],transactionFailed:[]},this.destroy=s.bind(this),this.sendTokens=n.bind(this),this.onExtensionResponse=a.bind(this),this.displayPromoDialog=e.bind(this),this.onPromoDialogClick=i.bind(this),this.closePromoDialog=t.bind(this),this.throwError=o.bind(this),this.on=r.bind(this),window.addEventListener("@oberton/extensionResponse",this.onExtensionResponse),this.sessionId};window.Oberton=l})();